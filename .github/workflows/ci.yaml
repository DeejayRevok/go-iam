name: ci
on:
  push:
permissions:
  contents: read
jobs:
  ci:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Set up environment
        run: |
          docker-compose build --build-arg DEVELOPMENT=false
          docker-compose up -d
      - name: Run linters
        run: docker exec go-uaa go run github.com/golangci/golangci-lint/cmd/golangci-lint@latest run -v
      - name: Run tests
        run: go test ./...
